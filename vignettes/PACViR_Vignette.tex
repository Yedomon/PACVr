\documentclass[letterpaper]{article}

\usepackage{fancyvrb}
\usepackage{fullpage}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{float}
\usepackage{hyperref}

\lstset{basicstyle=\ttfamily, 
        backgroundcolor=\color[gray]{0.95}}
        
\author{Michael Gruenstaeudl, Nils Jenke}
\title{Using the PACViR Pipeline}

\usepackage{Sweave}
\begin{document}
\input{PACViR_Vignette-concordance}
%\SweaveUTF8


\maketitle

\tableofcontents

\section{Introduction}

  The PACViR pipeline generates a visualization of a plastome in a circular fashion. This vignette provides two examples of   how to execute PACViR via the R function 'PACViR.complete()' and via bash.

\section{Requirements}

  To execute PACViR several requirements have to be installed.


  \begin{footnotesize}
  \begin{lstlisting}[linerange=\\begin\{Sinput\}-\\end\{Sinput\},includerangemarker=false]
\begin{Schunk}
\begin{Sinput}
>     #library(PACViR)
> 
\end{Sinput}
\end{Schunk}
  \end{lstlisting}
  \end{footnotesize}


\section{PACViR via R-function }

  PACViR can be easily executed via the PACViR.complete() function in R. Therefore one can load the provided data from the package.

  \begin{footnotesize}
  \begin{lstlisting}[linerange=\\begin\{Sinput\}-\\end\{Sinput\},includerangemarker=false]
\begin{Schunk}
\begin{Sinput}
>     # The absolute path to the input directory is set
>     inPath <- system.file("extdata", "MH161174/", package="PACViR")
>     # The names of the input files located in inPath are set
>     inFile_gb  <- "MH161174.gb"
>     inFile_bam <- "MH161174.bam"
>     gbk.file <- paste(inPath,"/",inFile_gb)
>     bam.file <- paste(inPath,"/",inFile_bam)
>     windowSize <- 250
>     mosdepthCmd <- "mosdepth"
>     threshold <- 15 
>     delete <- "TRUE"
>     outDir <- "./output"
>     #PACViR.complete(gbk.file, bam.file, windowSize, mosdepthCmd, threshold, delete, outDir)
\end{Sinput}
\end{Schunk}
  \end{lstlisting}
  \end{footnotesize}
  

%  \begin{figure}[H]
%  \centering
%    \includegraphics{}
%    \caption{Visualization of SCHM2 plastome with PACViR.complete()}
%  \centering
%  \end{figure}

\section{PACViR via command line}

  Execute PACViR\_Rscript.R via command line with Rscript.
  
\begin{footnotesize}
\begin{lstlisting}
  Rscript PACViR_Rscript.R  -k ../inst/extdata/DAS01.gb -b ../inst/extdata/DAS01.bam 
\end{lstlisting}
\end{footnotesize}

%  \begin{figure}[H]
%  \centering
%    \includegraphics{}
%    \caption{Visualization of DAS01 plastome with Rscript}
%  \centering
%  \end{figure}
  
\section{Modifying parameters}

  Depending on which system PACViR will be executed

\section{More Information}

\section{sessionInfo}

\begin{Schunk}
\begin{Sinput}
> sessionInfo()
\end{Sinput}
\begin{Soutput}
R version 3.3.3 (2017-03-06)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Debian GNU/Linux 9 (stretch)

locale:
 [1] LC_CTYPE=de_DE.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=de_DE.UTF-8        LC_COLLATE=de_DE.UTF-8    
 [5] LC_MONETARY=de_DE.UTF-8    LC_MESSAGES=de_DE.UTF-8   
 [7] LC_PAPER=de_DE.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=de_DE.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets 
[6] methods   base     

loaded via a namespace (and not attached):
[1] tools_3.3.3
\end{Soutput}
\end{Schunk}

\end{document}
